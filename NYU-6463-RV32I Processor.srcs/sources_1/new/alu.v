`timescale 1ns / 1ps
//////////////////////////////////////////////////////////////////////////////////
// Company: 
// Engineer: 
// 
// Create Date: 11/17/2021 09:46:34 PM
// Design Name: 
// Module Name: alu
// Project Name: 
// Target Devices: 
// Tool Versions: 
// Description: 
// 
// Dependencies: 
// 
// Revision:
// Revision 0.01 - File Created
// Additional Comments:
// 
//////////////////////////////////////////////////////////////////////////////////


module alu(
    input wire [3:0] opmode,
    input wire [31:0] in1,
    input wire [31:0] in2,
    input wire switch,
    output wire [31:0] out1,
    output wire zero
    );
    reg [31:0] out2;
    reg zero1;
    
    always @(*) begin
    if (switch == 1)begin
    
    case(opmode)
    //and
    4'b0000:begin out2<=in1&in2; zero1<=0;end
    //or
    4'b0001: begin out2<=in1|in2;zero1<=0;end
    //subtract  
    4'b0110:begin out2<=in1-in2; if(in1==in2)zero1<=1; end
    //add
    4'b0010:begin out2<=in1+in2;zero1<=0;end
    4'b0111:begin out2<=in1^in2;zero1<=0;end
    4'b1000:begin case(in2[4:0])//sll
        5'b00000:out2<={in1[31:0]};
        5'b00001:out2<={in1[30:0],1'b0};
        5'b00010:out2<={in1[29:0],2'b0};
        5'b00011:out2<={in1[28:0],3'b0};
        5'b00100:out2<={in1[27:0],4'b0};
        5'b00101:out2<={in1[26:0],5'b0};
        5'b00110:out2<={in1[25:0],6'b0};
        5'b00111:out2<={in1[24:0],7'b0};
        5'b01000:out2<={in1[23:0],8'b0};
        5'b01001:out2<={in1[22:0],9'b0};
        5'b01010:out2<={in1[21:0],10'b0};
        5'b01011:out2<={in1[20:0],11'b0};
        5'b01100:out2<={in1[19:0],12'b0};
        5'b01101:out2<={in1[18:0],13'b0};
        5'b01110:out2<={in1[17:0],14'b0};
        5'b01111:out2<={in1[16:0],15'b0};
        5'b10000:out2<={in1[14:0],17'b0};
        5'b10001:out2<={in1[15:0],16'b0};
        5'b10010:out2<={in1[13:0],18'b0};
        5'b10011:out2<={in1[12:0],19'b0};
        5'b10100:out2<={in1[11:0],20'b0};
        5'b10101:out2<={in1[10:0],21'b0};
        5'b10110:out2<={in1[9:0],22'b0};
        5'b10111:out2<={in1[8:0],23'b0};
        5'b11000:out2<={in1[7:0],24'b0};
        5'b11001:out2<={in1[6:0],25'b0};
        5'b11010:out2<={in1[5:0],26'b0};
        5'b11011:out2<={in1[4:0],27'b0};
        5'b11100:out2<={in1[3:0],28'b0};
        5'b11101:out2<={in1[2:0],29'b0};
        5'b11110:out2<={in1[1:0],30'b0};
        5'b11111:out2<={in1[0],31'b0};
    
    endcase
    zero1<=0;
    end
    4'b1001:begin case(in2[4:0])//srl
        5'b00000:out2<={in1[31:0]};
        5'b00001:out2<={1'b0,in1[31:1]};
        5'b00010:out2<={2'b0,in1[31:2]};
        5'b00011:out2<={3'b0,in1[31:3]};
        5'b00100:out2<={4'b0,in1[31:4]};
        5'b00101:out2<={5'b0,in1[31:5]};
        5'b00110:out2<={6'b0,in1[31:6]};
        5'b00111:out2<={7'b0,in1[31:7]};
        5'b01000:out2<={8'b0,in1[31:8]};
        5'b01001:out2<={9'b0,in1[31:9]};
        5'b01010:out2<={10'b0,in1[31:10]};
        5'b01011:out2<={11'b0,in1[31:11]};
        5'b01100:out2<={12'b0,in1[31:12]};
        5'b01101:out2<={13'b0,in1[31:13]};
        5'b01110:out2<={14'b0,in1[31:14]};
        5'b01111:out2<={15'b0,in1[31:15]};
        5'b10000:out2<={16'b0,in1[31:16]};
        5'b10001:out2<={17'b0,in1[31:17]};
        5'b10010:out2<={18'b0,in1[31:18]};
        5'b10011:out2<={19'b0,in1[31:19]};
        5'b10100:out2<={20'b0,in1[31:20]};
        5'b10101:out2<={21'b0,in1[31:21]};
        5'b10110:out2<={22'b0,in1[31:22]};
        5'b10111:out2<={23'b0,in1[31:23]};
        5'b11000:out2<={24'b0,in1[31:24]};
        5'b11001:out2<={25'b0,in1[31:25]};
        5'b11010:out2<={26'b0,in1[31:26]};
        5'b11011:out2<={27'b0,in1[31:27]};
        5'b11100:out2<={28'b0,in1[31:28]};
        5'b11101:out2<={29'b0,in1[31:29]};
        5'b11110:out2<={30'b0,in1[31:30]};
        5'b11111:out2<={31'b0,in1[31]};
    
    endcase
    zero1<=0;
    end
    4'b1010:if(in1[31]==0)begin
    zero1<=0;
    case(in2[4:0])//sra
        5'b00000:out2<={in1[31:0]};
        5'b00001:out2<={1'b0,in1[31:1]};
        5'b00010:out2<={2'b0,in1[31:2]};
        5'b00011:out2<={3'b0,in1[31:3]};
        5'b00100:out2<={4'b0,in1[31:4]};
        5'b00101:out2<={5'b0,in1[31:5]};
        5'b00110:out2<={6'b0,in1[31:6]};
        5'b00111:out2<={7'b0,in1[31:7]};
        5'b01000:out2<={8'b0,in1[31:8]};
        5'b01001:out2<={9'b0,in1[31:9]};
        5'b01010:out2<={10'b0,in1[31:10]};
        5'b01011:out2<={11'b0,in1[31:11]};
        5'b01100:out2<={12'b0,in1[31:12]};
        5'b01101:out2<={13'b0,in1[31:13]};
        5'b01110:out2<={14'b0,in1[31:14]};
        5'b01111:out2<={15'b0,in1[31:15]};
        5'b10000:out2<={16'b0,in1[31:16]};
        5'b10001:out2<={17'b0,in1[31:17]};
        5'b10010:out2<={18'b0,in1[31:18]};
        5'b10011:out2<={19'b0,in1[31:19]};
        5'b10100:out2<={20'b0,in1[31:20]};
        5'b10101:out2<={21'b0,in1[31:21]};
        5'b10110:out2<={22'b0,in1[31:22]};
        5'b10111:out2<={23'b0,in1[31:23]};
        5'b11000:out2<={24'b0,in1[31:24]};
        5'b11001:out2<={25'b0,in1[31:25]};
        5'b11010:out2<={26'b0,in1[31:26]};
        5'b11011:out2<={27'b0,in1[31:27]};
        5'b11100:out2<={28'b0,in1[31:28]};
        5'b11101:out2<={29'b0,in1[31:29]};
        5'b11110:out2<={30'b0,in1[31:30]};
        5'b11111:out2<={31'b0,in1[31]};
    
    endcase
    end else begin
    zero1<=0;
    case(in2[4:0])//sra
        5'b00000:out2<={in1[31:0]};
        5'b00001:out2<={1'b1,in1[31:1]};
        5'b00010:out2<={2'b11,in1[31:2]};
        5'b00011:out2<={3'b111,in1[31:3]};
        5'b00100:out2<={4'b1111,in1[31:4]};
        5'b00101:out2<={5'b11111,in1[31:5]};
        5'b00110:out2<={6'b111111,in1[31:6]};
        5'b00111:out2<={7'b1111111,in1[31:7]};
        5'b01000:out2<={8'b11111111,in1[31:8]};
        5'b01001:out2<={9'b111111111,in1[31:9]};
        5'b01010:out2<={10'b1111111111,in1[31:10]};
        5'b01011:out2<={11'b11111111111,in1[31:11]};
        5'b01100:out2<={12'b111111111111,in1[31:12]};
        5'b01101:out2<={13'b1111111111111,in1[31:13]};
        5'b01110:out2<={14'b11111111111111,in1[31:14]};
        5'b01111:out2<={15'b111111111111111,in1[31:15]};
        5'b10000:out2<={16'b1111111111111111,in1[31:16]};
        5'b10001:out2<={17'b11111111111111111,in1[31:17]};
        5'b10010:out2<={18'b111111111111111111,in1[31:18]};
        5'b10011:out2<={19'b1111111111111111111,in1[31:19]};
        5'b10100:out2<={20'b11111111111111111111,in1[31:20]};
        5'b10101:out2<={21'b111111111111111111111,in1[31:21]};
        5'b10110:out2<={22'b1111111111111111111111,in1[31:22]};
        5'b10111:out2<={23'b11111111111111111111111,in1[31:23]};
        5'b11000:out2<={24'b111111111111111111111111,in1[31:24]};
        5'b11001:out2<={25'b1111111111111111111111111,in1[31:25]};
        5'b11010:out2<={26'b11111111111111111111111111,in1[31:26]};
        5'b11011:out2<={27'b111111111111111111111111111,in1[31:27]};
        5'b11100:out2<={28'b1111111111111111111111111111,in1[31:28]};
        5'b11101:out2<={29'b11111111111111111111111111111,in1[31:29]};
        5'b11110:out2<={30'b111111111111111111111111111111,in1[31:30]};
        5'b11111:out2<={31'b1111111111111111111111111111111,in1[31]};
    
    endcase
    end
    4'b1100:begin zero1<=0; if(in1[31]==0 & in2[31]==0) begin if(in1<in2)out2<=in1;else out2<=32'b0;end 
    else if(in1[31]==1 & in2[31]==0)out2<=in1;
    else if(in1[31]==1 & in2[31]==1)begin if(in2<in1)out2<=in1;else out2<=32'b0;end
    else if(in1[31]==0 & in2[31]==1)out2<=32'b0;
    end
    4'b1101:begin zero1<=0;if(in1<in2)out2<=in1;else out2<=0;end
    4'b0011:zero1<=1; 
    default: begin out2<=32'h0;zero1<=1;end
    endcase
    end
    end
    assign out1=out2;
    assign zero=zero1;
endmodule
